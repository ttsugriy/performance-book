project:
  type: book
  output-dir: _site

book:
  title: "The Algebra of Speed"
  subtitle: "Mathematical Foundations of Computational Performance"
  author: "Taras Tsugrii"
  date: today
  repo-url: https://github.com/ttsugriy/performance-book
  repo-actions: [edit, issue]
  sharing: [twitter, linkedin]

  chapters:
    - index.qmd
    - part: "Part I: The Hardware Reality"
      chapters:
        - chapters/01-memory-hierarchy.qmd
        - chapters/02-bandwidth.qmd
        - chapters/03-parallelism.qmd
        - chapters/04-gpu-architecture.qmd
        - chapters/interlude-measurement.qmd
    - part: "Part II: The Algebra of Efficiency"
      chapters:
        - chapters/04-chunking.qmd
        - chapters/05-factoring.qmd
        - chapters/06-skipping.qmd
        - chapters/07-locality.qmd
        - chapters/08-fusion.qmd
    - part: "Part III: The Investigations"
      chapters:
        - chapters/09-matrix-multiply.qmd
        - chapters/10-flash-attention.qmd
        - chapters/11-lora.qmd
        - chapters/12-quantization.qmd
        - chapters/13-distributed.qmd
        - chapters/14-inference.qmd
        - chapters/24-mixture-of-experts.qmd
        - chapters/25-long-context.qmd
        - chapters/26-gpu-memory.qmd
        - chapters/27-advanced-serving.qmd
        - chapters/28-state-space-models.qmd
    - part: "Part IV: The Method"
      chapters:
        - chapters/15-measurement.qmd
        - chapters/16-hypothesis.qmd
        - chapters/17-analogy.qmd
        - chapters/18-when-not-to.qmd
        - chapters/19-profiling-tools.qmd
        - chapters/20-compiler-opts.qmd
        - chapters/21-triton.qmd
        - chapters/22-numerical-precision.qmd
        - chapters/23-production-cases.qmd
        - chapters/29-torch-compile.qmd
    - part: "Appendices"
      chapters:
        - chapters/glossary.qmd

format:
  html:
    theme:
      light: [cosmo, custom.scss]
      dark: [darkly, custom.scss]
    code-copy: true
    code-fold: false
    code-tools: true
    toc: true
    toc-depth: 3
    number-sections: true
    highlight-style: github
    fig-responsive: true

execute:
  freeze: auto
  cache: true

bibliography: references.bib
csl: ieee.csl

# For Observable JS interactives
ojs: true
